!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),c=function(e){return e.getParam("save_enablewhendirty",!0)},i=function(e,n){e.notificationManager.open({text:e.translate(n),type:"error"})},t=function(t){t.addCommand("mceSave",function(){!function(e){var n;if(n=a.DOM.getParent(e.id,"form"),!c(e)||e.isDirty()){if(e.save(),e.getParam("save_onsavecallback"))return e.execCallback("save_onsavecallback",e),e.nodeChanged();n?(e.setDirty(!1),n.onsubmit&&!n.onsubmit()||("function"==typeof n.submit?n.submit():i(e,"Error: Form submit field collision.")),e.nodeChanged()):i(e,"Error: No form element found.")}}(t)}),t.addCommand("mceCancel",function(){var e,n;e=t,n=o.trim(e.startContent),e.getParam("save_oncancelcallback")?e.execCallback("save_oncancelcallback",e):(e.setContent(n),e.undoManager.clear(),e.nodeChanged())})},r=function(t){return function(e){var n=e.control;t.on("nodeChange dirty",function(){n.disabled(c(t)&&!t.isDirty())})}};e.add("save",function(e){var n;(n=e).addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:r(n)}),n.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:r(n)}),n.addShortcut("Meta+S","","mceSave"),t(e)})}();