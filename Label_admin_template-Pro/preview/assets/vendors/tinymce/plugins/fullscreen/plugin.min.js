!function(){"use strict";var r=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return r(n())}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),m=function(e,t){e.fire("FullscreenStateChanged",{state:t})},g=t.DOM,l=function(e,t){e.addCommand("mceFullScreen",function(){!function(e,t){var n,r,l,i,o,c,s=document.body,d=document.documentElement,u=t.get(),a=function(){var e,t,n,i;g.setStyle(l,"height",(n=window,i=document.body,i.offsetWidth&&(e=i.offsetWidth,t=i.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}).h-(r.clientHeight-l.clientHeight))},h=function(){g.unbind(window,"resize",a)};if(n=(r=e.getContainer()).style,i=(l=e.getContentAreaContainer().firstChild).style,u)i.width=u.iframeWidth,i.height=u.iframeHeight,u.containerWidth&&(n.width=u.containerWidth),u.containerHeight&&(n.height=u.containerHeight),g.removeClass(s,"mce-fullscreen"),g.removeClass(d,"mce-fullscreen"),g.removeClass(r,"mce-fullscreen"),o=u.scrollPos,window.scrollTo(o.x,o.y),g.unbind(window,"resize",u.resizeHandler),e.off("remove",u.removeHandler),t.set(null),m(e,!1);else{var f={scrollPos:(c=g.getViewPort(),{x:c.x,y:c.y}),containerWidth:n.width,containerHeight:n.height,iframeWidth:i.width,iframeHeight:i.height,resizeHandler:a,removeHandler:h};i.width=i.height="100%",n.width=n.height="",g.addClass(s,"mce-fullscreen"),g.addClass(d,"mce-fullscreen"),g.addClass(r,"mce-fullscreen"),g.bind(window,"resize",a),e.on("remove",h),a(),t.set(f),m(e,!0)}}(e,t)})},o=function(n){return function(e){var t=e.control;n.on("FullscreenStateChanged",function(e){t.active(e.state)})}};e.add("fullscreen",function(e){var t,n,i=r(null);return e.settings.inline||(l(e,i),(n=e).addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:o(n),context:"view"}),n.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:o(n)}),e.addShortcut("Ctrl+Shift+F","","mceFullScreen")),t=i,{isFullscreen:function(){return null!==t.get()}}})}();