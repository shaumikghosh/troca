!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(o){return function(e){for(var t=0;t<e.length;t++)(n=e[t]).attr("href")||!n.attr("id")&&!n.attr("name")||n.firstChild||e[t].attr("contenteditable",o);var n}};e.add("anchor",function(e){var t,o,n;(n=e).on("PreInit",function(){n.parser.addNodeFilter("a",a("false")),n.serializer.addNodeFilter("a",a(null))}),(o=e).addCommand("mceAnchor",function(){var c,e,t,n;n="A"===(t=(e=c=o).selection.getNode()).tagName&&""===e.dom.getAttrib(t,"href")?t.id||t.name:"",c.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:n},onsubmit:function(e){var t,n,o,a,r,d,i=e.data.id;t=c,d=n=i,(/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(d)?(a=n,"A"===(r=(o=t).selection.getNode()).tagName&&""===o.dom.getAttrib(r,"href")?(r.removeAttribute("name"),r.id=a,o.undoManager.add()):(o.focus(),o.selection.collapse(!0),o.execCommand("mceInsertContent",!1,o.dom.createHTML("a",{id:a}))),0):(t.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),1))&&e.preventDefault()}})}),(t=e).addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),t.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})})}();